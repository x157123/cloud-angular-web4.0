<mat-drawer-container autosize>
  <mat-drawer #drawer mode="over" position="end" class="edit-drawer">
    <app-deploy-edit #appDeployEdit></app-deploy-edit>
  </mat-drawer>
  <mat-drawer-content>
    <mat-toolbar>
      <input matInput placeholder="查询条件">
      <button mat-raised-button color="primary" (click)="queryData()">查询</button>
      <button mat-icon-button color="primary" (click)="openEditSidenav(0)" aria-label="新增数据">
        <mat-icon>add</mat-icon>
      </button>
    </mat-toolbar>
    <mat-progress-bar [ngStyle]="visibilityListData" mode="indeterminate"></mat-progress-bar>
    <div class="table-container">
      <div class="tables-container">
        <div class="tables-container-content">
          <mat-table [dataSource]="dataSource">
            <ng-container matColumnDef="id" sticky >
              <mat-header-cell *matHeaderCellDef> id </mat-header-cell>
              <mat-cell *matCellDef="let element;" > {{element.id}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="name">
              <mat-header-cell mat-header-cell *matHeaderCellDef> 采集任务名称 </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.name}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="readConnectId">
              <mat-header-cell mat-header-cell *matHeaderCellDef> 采集数据源 </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.readConnectId}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="writeConnectId">
              <mat-header-cell mat-header-cell *matHeaderCellDef> 写入数据源 </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.writeConnectId}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="state">
              <mat-header-cell mat-header-cell *matHeaderCellDef> 状态 </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.state}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="offSet">
              <mat-header-cell mat-header-cell *matHeaderCellDef> 偏移量 </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.offSet}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="operate">
              <mat-header-cell mat-header-cell *matHeaderCellDef> 操作 </mat-header-cell>
              <mat-cell *matCellDef="let element">
                <a mat-icon-button color="primary" (click)="openEditSidenav(element.id, true)"  title="查看">
                  <mat-icon>open_in_new</mat-icon>
                </a>
                <a mat-icon-button color="primary" (click)="openEditSidenav(element.id)"  title="修改">
                  <mat-icon>edit</mat-icon>
                </a>
                <a mat-icon-button color="green" (click)="start(element.id)" *ngIf="element.state == null || element.state == 0"  title="启动">
                  <mat-icon>play_circle</mat-icon>
                </a>
                <a mat-icon-button color="accent" (click)="end(element.id)" *ngIf="element.state == 1"  title="停止">
                  <mat-icon>stop_circle</mat-icon>
                </a>
                <a mat-icon-button color="accent" (click)="delById(element.id)"  title="删除">
                  <mat-icon>delete</mat-icon>
                </a>
              </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
          </mat-table>
        </div>
      </div>
      <mat-paginator [pageSizeOptions]="[10, 15, 20]" [length]="dataLength"
                     showFirstLastButtons
                     firstPageLabel="firstPageLabel"
                     itemsPerPageLabel="itemsPerPageLabel"
                     lastPageLabel="lastPageLabel"
                     nextPageLabel="nextPageLabel"
                     previousPageLabel="previousPageLabel"
                     [pageIndex]="pageIndex"
                     (page)="handlePageEvent($event)"
                     aria-label="Select page of periodic elements">
      </mat-paginator>
    </div>
  </mat-drawer-content>
</mat-drawer-container>
